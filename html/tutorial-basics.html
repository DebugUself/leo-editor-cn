
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>10 分钟体验 Leo &#8212; Leo 5.6 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using Leo as a Personal Information Manager" href="tutorial-pim.html" />
    <link rel="prev" title="Leo’s Tutorials" href="tutorial.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tutorial-pim.html" title="Using Leo as a Personal Information Manager"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Leo’s Tutorials"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="leo_toc.html">Leo 5.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tutorial.html" accesskey="U">Leo’s Tutorials</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="leo">
<h1>10 分钟体验 Leo<a class="headerlink" href="#leo" title="Permalink to this headline">¶</a></h1>
<p>本章介绍 Leo 最重要的特性和概念.</p>
<div class="contents local topic" id="id1">
<p class="topic-title first">目录</p>
<ul class="simple">
<li><a class="reference internal" href="#id2" id="id30">Leo 的主窗口</a></li>
<li><a class="reference internal" href="#id3" id="id31">命令</a></li>
<li><a class="reference internal" href="#id7" id="id32">提纲和克隆</a></li>
<li><a class="reference internal" href="#id9" id="id33">Leo 指令</a></li>
<li><a class="reference internal" href="#id11" id="id34">外部文件</a><ul>
<li><a class="reference internal" href="#file" id="id35">&#64;file</a></li>
<li><a class="reference internal" href="#id13" id="id36">标记</a></li>
<li><a class="reference internal" href="#clean" id="id37">&#64;clean</a></li>
<li><a class="reference internal" href="#all" id="id38">&#64;all</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14" id="id39">配置 Leo</a></li>
<li><a class="reference internal" href="#id16" id="id40">插件</a></li>
<li><a class="reference internal" href="#id18" id="id41">脚本基础</a><ul>
<li><a class="reference internal" href="#id19" id="id42">脚本标记</a></li>
<li><a class="reference internal" href="#c-g-p" id="id43">c, g 和 p</a></li>
<li><a class="reference internal" href="#id22" id="id44">访问提纲数据</a></li>
<li><a class="reference internal" href="#button-command" id="id45">&#64;button 和 &#64;command 节点</a></li>
<li><a class="reference internal" href="#test" id="id46">&#64;test 节点</a></li>
<li><a class="reference internal" href="#calltips" id="id47">自动补全和 calltips</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id27" id="id48">总结</a></li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id30">Leo 的主窗口</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>下面是 Leo 主窗口的截图:</p>
<img alt="Screenshot" src="_images/leo-workbook.png" />
<p id="index-0">Leo 的主窗口, 由 <strong>图标区域</strong>  (菜单下方),  <strong>提纲窗格</strong> (左上方),  <strong>日志窗格</strong> (右上方) , <strong>正文窗格</strong> (左下方), <strong>可选的视图窗格</strong> (右下方) 组成. <strong>minibuffer</strong> (<strong>迷你缓冲</strong>) 和 <strong>状态行</strong>, 位于主界面的底部.</p>
<p>日志窗格由多个标签组成. <strong>日志标签</strong> 显示来自 Leo 的信息, <strong>查找标签</strong>  显示 Leo 的查找/替换命令的状态. 其他标签也可能出现在日志窗格: <strong>拼写标签</strong> 控制 Leo 的拼写检查. <strong>补全标签</strong> 显示支持的输入自动补全.</p>
<p id="index-1">Leo 存储所有数据至 <strong>节点</strong>. 节点有 <strong>标题</strong> (提纲窗格显示) 和 <strong>正文</strong>. 正文窗格显示
<strong>当前选中节点</strong> 的正文, 其节点标题在提纲窗格中被选中.  标题的 <strong>图标框</strong> 表明节点状态. 例如,  当节点修改后, 图标框的边线变黑.</p>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id31">命令</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Leo 有百余种命令, 如 <a class="reference external" href="commands.html">Leo 命令索引</a> 所述. <strong>非常重要</strong>: 你可以 (且应该) 首先无视这些命令中的绝大多数. 执行命令, 可使用 <a class="reference external" href="commands.html#key-reference">按键绑定</a>, 或在 <a class="reference external" href="commands.html#executing-commands-from-the-minibuffer">Leo minibuffer</a> <em>使用名称</em>, 类似 <a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Minibuffer.html">Emacs minibuffer</a>.</p>
<p>激活命令, 可在 minibuffer 中输入命令全名并敲击 <code class="docutils literal"><span class="pre">&lt;Return&gt;</span></code>, 但那将是海量工作. 相反,
你应该使用 <strong>输入补全</strong> 避免大部分输入. 例如, 你可以这样执行 <em>sort-lines</em> (行分类) 命令::</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Alt</span><span class="o">-</span><span class="n">X</span><span class="o">&gt;</span><span class="n">so</span><span class="o">&lt;</span><span class="n">Tab</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>现在, minibuffer 将列出以 “so” 开头的所有命令的常用前缀, 即::</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sort</span><span class="o">-</span>
</pre></div>
</div>
<p>输入 l&lt;Tab&gt; 后, minibuffer 将包含:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sort</span><span class="o">-</span><span class="n">lines</span>
</pre></div>
</div>
<p>现在,  按 &lt;Return&gt; 即可执行命令. 输入补全将很快成为第二天性.</p>
<p><strong>非常重要</strong>: 无需记住 Leo 命令的确切名称. 相反, 你只需记住几个常用的命令前缀, 例如:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">clone</span><span class="o">-</span><span class="n">find</span>  <span class="n">查找节点</span> <span class="n">命令</span>
<span class="n">file</span><span class="o">-</span>       <span class="n">文件</span> <span class="n">命令</span>
<span class="n">find</span><span class="o">-</span>       <span class="n">查找</span> <span class="n">命令</span>
<span class="n">isearch</span><span class="o">-</span>    <span class="n">incremental</span> <span class="n">search</span> <span class="n">commands</span>
<span class="n">leo</span><span class="o">-</span>        <span class="n">打开</span> <span class="o">.</span><span class="n">leo</span> <span class="n">文件</span>
<span class="nb">open</span><span class="o">-</span>       <span class="n">打开文件或网址</span>
<span class="nb">print</span><span class="o">-</span>      <span class="n">打印</span> <span class="n">命令</span>
<span class="n">sort</span><span class="o">-</span>       <span class="n">分类</span> <span class="n">命令</span>
<span class="n">toggle</span><span class="o">-</span>     <span class="n">切换设置命令</span>
</pre></div>
</div>
<p>下述命令作用于 minibuffer 本身:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">Alt-X</span> <span class="pre">(命令全名)</span></code></dt>
<dd>通过输入全名, 执行任意命令.</dd>
<dt><code class="docutils literal"><span class="pre">Ctrl-P</span> <span class="pre">(重复复杂命令)</span></code></dt>
<dd>重复 minibuffer 最后输入的命令名称</dd>
</dl>
<p>在 minibuffer 中, 下述按键将被特别对待:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">&lt;Return&gt;</span></code></dt>
<dd>执行命令.</dd>
<dt><code class="docutils literal"><span class="pre">&lt;Tab&gt;</span></code></dt>
<dd>显示所有的有效补全.</dd>
<dt><code class="docutils literal"><span class="pre">&lt;BackSpace&gt;</span></code></dt>
<dd>显示更多补全.</dd>
<dt><code class="docutils literal"><span class="pre">Ctrl-G</span></code></dt>
<dd>退出 minibuffer , 聚焦于正文窗格.</dd>
<dt><code class="docutils literal"><span class="pre">UpArrow</span></code></dt>
<dd>在命令历史中, 调至更早的命令. 第一个 向上箭头 等价于 <code class="docutils literal"><span class="pre">Ctrl-P</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">DownArrow</span></code></dt>
<dd>在命令历史中, 调至更近的命令.</dd>
</dl>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id32">提纲和克隆</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>Leo 是一个 <a class="reference external" href="commands.html#outline-commands">功能齐全的提纲编辑器</a>, 拥有可插入, 删除, 移动, 升级, 降级节点的命令.</p>
<p><strong>克隆</strong> 是 Leo 的一个独特功能. 所有提纲节点都可被克隆. 克隆节点实际上是 <strong>相同的</strong> 节点, 只是出现在提纲的不同地方. 对任一克隆的更改, 都会同步在节点的所有其他克隆上, <em>包括他们的后代节点</em>. 例如, 假设 A` 节点是 A 节点的克隆:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>- A`
    - B
    - C
- D
- A`
    - B
    - C
</pre></div>
</div>
<p>右移 C, 提纲变成:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>- A`
    - B
        - C
- D
- A`
    - B
        - C
</pre></div>
</div>
<p id="clone-find">克隆允许你在单一提纲内创建数据的多种视图. 例如, Leo 的 <a class="reference internal" href="#clone-find">clone-find 命令</a> 创建所有已找到节点的克隆, 移动这些新建的克隆, 使他们成为描述搜索条件的 <strong>组织节点</strong> 的子节点. 组织节点是提纲数据的全新视图, 聚焦于搜索出的节点!</p>
</div>
<div class="section" id="id9">
<h2><a class="toc-backref" href="#id33">Leo 指令</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p id="index-2">Leo <strong>指令</strong> 控制 Leo 的运行. 指令在正文的起始位置, 以 <code class="docutils literal"><span class="pre">&#64;</span></code> 开头. 指令 <strong>应用于后代</strong>, 直到在后代节点中被覆盖.</p>
<p id="index-3"><strong>&#64;color</strong>, <strong>&#64;nocolor</strong> 和 <strong>&#64;nocolor-node</strong> 指令控制语法高亮. <strong>注意</strong>: 包含多个颜色指令的节点, <strong>不会</strong> 影响后代节点的颜色:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@color</span>
<span class="nd">@nocolor</span>
<span class="nd">@nocolor</span><span class="o">-</span><span class="n">node</span>
</pre></div>
</div>
<p id="index-4"><strong>&#64;language</strong> 指令指示哪种语言有效:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@language</span> <span class="n">python</span>
<span class="nd">@language</span> <span class="n">c</span>
<span class="nd">@language</span> <span class="n">rest</span> <span class="c1"># restructured text</span>
<span class="nd">@language</span> <span class="n">plain</span> <span class="c1"># plain text: no syntax coloring.</span>
</pre></div>
</div>
<p id="index-5"><strong>&#64;pagewidth</strong> 指令设置页面宽度 (格式化段落使用). <strong>&#64;tabwidth</strong> 指令控制缩进. 负数制表符 (推荐 Python 使用) 转化制表符为空格:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@pagewidth</span> <span class="mi">100</span>
<span class="nd">@tabwidth</span> <span class="o">-</span><span class="mi">4</span>
<span class="nd">@tabwidth</span> <span class="mi">8</span>
</pre></div>
</div>
<p id="index-6"><strong>&#64;wrap</strong> 和 <strong>&#64;nowrap</strong> 启用和禁用正文中的自动换行:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@nowrap</span>
<span class="nd">@wrap</span>
</pre></div>
</div>
<p><strong>&#64;first</strong> 指令确保其后跟的内容, 出现在每一个外部文件 (阅读下一部分) 的开头.  多个 &#64;first 指令可行. 这些指令必须出现在正文的 <strong>首行</strong>.</p>
<blockquote>
<div>&#64;first # -<em>- coding: utf-8 -</em>-
&#64;first #! /usr/bin/env python</div></blockquote>
<p>Leo 的其他指令, 如 <a class="reference external" href="directives.html">指令索引</a> 所述.</p>
</div>
<div class="section" id="id11">
<h2><a class="toc-backref" href="#id34">外部文件</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>Leo 提纲可索引 <strong>外部文件</strong>, 即文件系统中的文件. 当打开 Leo 提纲时, Leo 会快速加载文件. 下节仅讨论基础. 更多细节请移步 <a class="reference external" href="directives.html">Leo 索引指南</a> .</p>
<div class="section" id="file">
<h3><a class="toc-backref" href="#id35">&#64;file</a><a class="headerlink" href="#file" title="Permalink to this headline">¶</a></h3>
<p id="index-7">** &#64;file 节点**: 节点标题以 <cite>&#64;file</cite> 开头, 后跟外部文件的路径.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@file</span> <span class="n">leoNodes</span><span class="o">.</span><span class="n">py</span>
<span class="nd">@file</span> <span class="o">../../</span><span class="n">notes</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>&#64;file 节点及其后代, 代表了一个外部文件. 当你更改 Leo 外的外部文件时, Leo 会自动更新 &#64;file 节点. 当保存提纲时, Leo 自动将所有对 &#64;file 树的修改写入外部文件.</p>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id36">标记</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p id="index-8">Leo 的 <strong>标记</strong> 显示 Leo 如何从 &#64;file 树中创建外部文件. 标记可出现在任意正文中, 且 <strong>必须</strong> 出现在 &#64;file 节点本身的正文中.</p>
<p>标记有两种: <strong>章节索引</strong> (&lt;&lt;这是我们的部分&gt;&gt;) 和 <strong>&#64;others</strong> 指令. 章节索引指向 <strong>命名节点</strong>, 即 <em>标题</em> 看起来像章节索引的节点. &#64;other 指向所有 <em>其他</em> (未命名) 节点. 下面是一个 python 文件典型的 &#64;file 节点的正文:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@first</span> <span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&#39;&#39;&#39;whatever.py&#39;&#39;&#39;</span>
<span class="o">&lt;&lt;</span> <span class="n">imports</span> <span class="o">&gt;&gt;</span>
<span class="nd">@others</span>
<span class="c1"># 可以了, 哥们</span>
<span class="nd">@language</span> <span class="n">python</span>
<span class="nd">@tabwidth</span>
</pre></div>
</div>
<p>子节点必须定义 &lt;&lt;import&gt;&gt; 节点以及 Controller 类的方法.</p>
<p>当写入这个文件时, Leo 编写头两行:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@first</span> <span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&#39;&#39;&#39;whatever.py&#39;&#39;&#39;</span>
</pre></div>
</div>
<p>后跟 &lt;&lt;imports&gt;&gt; 节点的 <em>正文</em>, 所有 <em>other</em> 节点的正文, 按照提纲顺序, 后跟注释 #可以了, 哥们.</p>
</div>
<div class="section" id="clean">
<h3><a class="toc-backref" href="#id37">&#64;clean</a><a class="headerlink" href="#clean" title="Permalink to this headline">¶</a></h3>
<p id="index-9">当编写 <strong>文件树</strong> 时, Leo 将 <strong>结构注释</strong> 写入外部文件. 这些注释代表了提纲结构. 将一个 &#64;file 树写入 .leo 文件时, Leo 只写入根 &#64;file 节点. 为避免注释, 使用 <strong>&#64;clean</strong> 代替 &#64;file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@clean</span> <span class="n">leoNodes</span><span class="o">.</span><span class="n">py</span>
<span class="nd">@clean</span> <span class="o">../../</span><span class="n">notes</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>使用 &#64;clean 的副作用: Leo 将保存整个 &#64;clean 树至 .leo 文件.</p>
</div>
<div class="section" id="all">
<h3><a class="toc-backref" href="#id38">&#64;all</a><a class="headerlink" href="#all" title="Permalink to this headline">¶</a></h3>
<p id="index-10"><strong>&#64;all</strong> 指令使 Leo 将 <strong>&#64;file 树</strong> 的节点写入外部文件, <em>忽视</em> 所有标记. 结果, Leo 将节点按照 <strong>提纲顺序</strong> 写入文件, 即所有节点在提纲中展开时的顺序.</p>
</div>
</div>
<div class="section" id="id14">
<h2><a class="toc-backref" href="#id39">配置 Leo</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<p id="index-11">Leo 对几乎 <em>所有</em> 操作均使用提纲, 包括配置 Leo:</p>
<ul class="simple">
<li><strong>leo/config/leoSettings.leo</strong> 包含了 Leo 的默认 <strong>全局设置</strong>. 除非你是 Leo 的开发人员, 否则不要修改这个文件.</li>
<li><strong>~/myLeoSettings.leo</strong> 包含你的 <strong>个人设置</strong>. Leo 不会自动创建此文件: 你应自己创建. myLeoSetting.leo 中的设置, 将覆盖 (增补) leoSettings.leo 中的默认设置.</li>
<li>其他 .leo 文件也可能包含 <strong>本地设置</strong>. 本地设置仅适用于那个文件, 且覆盖所有其他设置.</li>
</ul>
<p><strong>设置节点</strong> 指定设置. 这些节点 <em>必须</em> 是 <strong>&#64;settings</strong> 节点的后代. 从 &#64;settings 树移出设置节点, 将取消设置. 标题以 &#64; 开头, 后跟类型或值. 举例如下, 其中正文在标题下缩进:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@bool</span> <span class="n">vim_mode</span> <span class="o">=</span> <span class="kc">False</span>

<span class="nd">@color</span> <span class="n">flash_brackets_background_color</span> <span class="o">=</span> <span class="n">red</span>

<span class="nd">@data</span> <span class="k">global</span><span class="o">-</span><span class="n">abbreviations</span>
    <span class="c1"># 正文包含缩写.</span>
    <span class="n">date</span><span class="p">;;</span><span class="o">=</span><span class="p">{</span><span class="o">|</span><span class="p">{</span><span class="n">x</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y/%m/</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)}</span><span class="o">|</span><span class="p">}</span>
    <span class="n">trace</span><span class="p">;;</span><span class="o">=</span><span class="n">trace</span> <span class="o">=</span> <span class="o">&lt;|</span><span class="nb">bool</span><span class="o">|&gt;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
    <span class="n">al</span><span class="p">;;</span><span class="o">=</span><span class="nd">@language</span>
    <span class="n">alh</span><span class="p">;;</span><span class="o">=</span><span class="nd">@language</span> <span class="n">html</span>\<span class="n">n</span>
    <span class="n">alj</span><span class="p">;;</span><span class="o">=</span><span class="nd">@language</span> <span class="n">javascript</span>\<span class="n">n</span>
    <span class="n">alm</span><span class="p">;;</span><span class="o">=</span><span class="nd">@language</span> <span class="n">md</span>\<span class="n">n</span>
    <span class="n">alp</span><span class="p">;;</span><span class="o">=</span><span class="nd">@language</span> <span class="n">python</span>\<span class="n">n</span>
    <span class="n">alr</span><span class="p">;;</span><span class="o">=</span><span class="nd">@language</span> <span class="n">rest</span>\<span class="n">n</span><span class="nd">@wrap</span>\<span class="n">n</span>
    <span class="n">nc</span><span class="p">;;</span><span class="o">=</span><span class="nd">@nocolor</span>\<span class="n">n</span>
    <span class="n">ncn</span><span class="p">;;</span><span class="o">=</span><span class="nd">@nocolor</span><span class="o">-</span><span class="n">node</span>\<span class="n">n</span>

<span class="nd">@string</span> <span class="n">script_file_path</span> <span class="o">=</span> <span class="o">../</span><span class="n">test</span><span class="o">/</span><span class="n">scriptFile</span><span class="o">.</span><span class="n">py</span>

<span class="nd">@enabled</span><span class="o">-</span><span class="n">plugins</span>
    <span class="c1"># 可使用的插件列表</span>
    <span class="n">plugins_menu</span><span class="o">.</span><span class="n">py</span>
    <span class="n">free_layout</span><span class="o">.</span><span class="n">py</span>
    <span class="n">mod_scripting</span><span class="o">.</span><span class="n">py</span>
    <span class="n">backlink</span><span class="o">.</span><span class="n">py</span>
    <span class="n">bigdash</span><span class="o">.</span><span class="n">py</span>
    <span class="n">bookmarks</span><span class="o">.</span><span class="n">py</span>
    <span class="n">contextmenu</span><span class="o">.</span><span class="n">py</span>

<span class="nd">@shortcuts</span>
    <span class="c1"># 正文包含个人按键绑定</span>
    <span class="n">file</span><span class="o">-</span><span class="nb">open</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">name</span>   <span class="o">=</span> <span class="n">Ctrl</span><span class="o">-</span><span class="n">O</span>
    <span class="n">save</span><span class="o">-</span><span class="nb">all</span>            <span class="o">=</span> <span class="n">Ctrl</span><span class="o">-</span><span class="n">S</span>
</pre></div>
</div>
<p>更多信息, 请移步 Leo 的 <a class="reference external" href="customizing.html">配置指南</a>.</p>
</div>
<div class="section" id="id16">
<h2><a class="toc-backref" href="#id40">插件</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p id="index-12"><a class="reference external" href="plugins.html">Leo 插件</a>  是 Python 程序, 扩展了 Leo 的功能. 插件存放在 leo/plugins 文件夹. <strong>&#64;enabled-plugins</strong> 设置节点开启插件. Leo 有很多插件, 包括:</p>
<ul class="simple">
<li><a class="reference external" href="plugins.html#bookmarks-py">bookmarks.py</a> 管理和显示书签.</li>
<li><a class="reference external" href="plugins.html#contextmenu-py">contextmenu.py</a> 右击标题显示文本菜单.</li>
<li><a class="reference external" href="plugins.html#mod-scripting-py">mod_scripting.py</a> 支持 &#64;button 和 &#64;command 节点.</li>
<li><a class="reference external" href="plugins.html#quicksearch-py">quicksearch.py</a> 增加 Nav 标签搜索.</li>
<li><a class="reference external" href="plugins.html#todo-py">todo.py</a>  提供待办事项清单和简单的项目管理功能.</li>
<li><a class="reference external" href="plugins.html#valuespace-py">valuespace.py</a>  增加提纲导向的表格功能.</li>
<li><a class="reference external" href="plugins.html#viewrendered-py">viewrendered.py</a>  创建呈现窗格以及其中的内容.</li>
</ul>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id41">脚本基础</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<p>非程序员: 随意跳过这部分.</p>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id42">脚本标记</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>Leo 的标记适用于脚本和外部文件. Leo 的 execute-script (执行脚本) 命令, 使用标记, 从选定的节点中 <strong>组成</strong> 脚本. 例如: 此正文定义了一个脚本的头部分:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;My script&#39;&#39;&#39;</span>
<span class="o">&lt;&lt;</span> <span class="n">imports</span> <span class="o">&gt;&gt;</span>
<span class="k">class</span> <span class="nc">Controller</span><span class="p">:</span>
    <span class="c1"># 子节点定义此类的方法.</span>
    <span class="nd">@others</span>
<span class="n">Controller</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">run</span> <span class="c1"># c *is* defined.</span>
</pre></div>
</div>
<p><strong>重要</strong>: Leo 在任何地方都可识别章节索引, 即使在字符串或评论内. 请移步 <a class="reference external" href="http://leoeditor.com/FAQ.html#what-about-code-that-looks-like-a-section-reference">这个 FAQ 入口</a>.</p>
</div>
<div class="section" id="c-g-p">
<h3><a class="toc-backref" href="#id43">c, g 和 p</a><a class="headerlink" href="#c-g-p" title="Permalink to this headline">¶</a></h3>
<p>execute-script 命令预先定义了三个名称: c, g 和 p. <strong>c</strong> 是执行脚本的提纲的 <a class="reference external" href="tutorial-basics.html#accessing-outline-data">指挥官</a>. <strong>g</strong> 是 <code class="docutils literal"><span class="pre">leo.core.leoGlobals</span></code> 模块, 包含很多有用的函数和类. <strong>p</strong> 是当前选定节点的 <a class="reference external" href="tutorial-scripting.html#positions-and-vnodes">位置</a></p>
</div>
<div class="section" id="id22">
<h3><a class="toc-backref" href="#id44">访问提纲数据</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>** Commander 类** 同时定义了一个脚本 API 和 DOM (文档对象模块), 后者可以 <em>完全</em> 访问提纲中的所有数据.
例如:</p>
<blockquote>
<div><dl class="docutils">
<dt>‘’‘</dt>
<dd>打印提纲的所有标题, 正确缩进,
以及每个节点正文的字符个数.</dd>
</dl>
<p>‘’’
# c.all_positions() 是一个 Python 生成器, 按提纲顺序, 生成所有位置.
for p in c.all_positions():</p>
<blockquote>
<div><dl class="docutils">
<dt>print(‘%3s %s %s’ % (</dt>
<dd>len(p.b),       # p.b is p’s body text.
‘ ‘<a href="#id23"><span class="problematic" id="id24">*</span></a>p.level(),  # p.level() is p’s indentation level.
p.h,            # p.h is p’s headline.</dd>
</dl>
<p>)</p>
</div></blockquote>
</div></blockquote>
<p>更多信息, 请移步 Leo 的 <a class="reference external" href="tutorial-scripting.html">脚本教程</a>.</p>
</div>
<div class="section" id="button-command">
<h3><a class="toc-backref" href="#id45">&#64;button 和 &#64;command 节点</a><a class="headerlink" href="#button-command" title="Permalink to this headline">¶</a></h3>
<p id="index-13"><strong>&#64;command 节点</strong> 定义命令. 运行命令所执行的脚本, 可适用于其他任何提纲节点. 即, p 与当前选择的节点捆绑, 而 <em>不是</em> &#64;button 节点. <strong>&#64;button 节点</strong> 同样运作, 同时在图标区域创建一个按钮. 点击那个按钮执行命令. 例如, 下面节点定义了 打印树 命令, 并与 Ctrl-9 捆绑:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@command</span> <span class="nb">print</span><span class="o">-</span><span class="n">tree</span> <span class="nd">@key</span><span class="o">=</span><span class="n">Ctrl</span><span class="o">-</span><span class="mi">9</span> <span class="c1"># 标题</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    打印所选子树的所有标题, 正确缩进,</span>
<span class="sd">    以及每个节点正文的字符个数.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="c1"># p.self_and_subtree() 是一个 python 生成器, 按提纲顺序,</span>
<span class="c1"># 生成 p 和 p 的子树的所有位置.</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">self</span><span class="o">.</span><span class="n">and_subtree</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">b</span><span class="p">),</span>       <span class="c1"># p.b 是 p 的正文</span>
        <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="n">p</span><span class="o">.</span><span class="n">level</span><span class="p">(),</span>  <span class="c1"># p.level() 是 p 的缩进级别</span>
        <span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">,</span>            <span class="c1"># p.h 是 p 的标题</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="test">
<span id="index-14"></span><h3><a class="toc-backref" href="#id46">&#64;test 节点</a><a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p><strong>&#64;test nodes</strong> 创建单元测试. &#64;test 节点自动将正文转换成一个单元测试的子类. 使用 Leo 的 <code class="docutils literal"><span class="pre">run-unit-test-</span></code> 命令运行这些测试. <code class="docutils literal"><span class="pre">&lt;Alt-X&gt;run&lt;tab&gt;</span></code> 提供完整列表. 下面是 Leo 的实际单元测试:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@test</span> <span class="n">c</span><span class="o">.</span><span class="n">positionExists</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">nodes</span> <span class="c1"># 标题</span>

<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">all_positions</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">positionExists</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>在 &#64;test 节点中, c, g 和 p 同样已预定义. 另外, <strong>self</strong> 是单元测试的实例. TestCase 由 &#64;test 节点创建. 例如:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<p>更多细节, 请移步 <a class="reference external" href="unitTesting.html">Leo 的单元测试索引</a>.</p>
</div>
<div class="section" id="calltips">
<h3><a class="toc-backref" href="#id47">自动补全和 calltips</a><a class="headerlink" href="#calltips" title="Permalink to this headline">¶</a></h3>
<p><strong>自动补全</strong> 提醒你所有包含在 Leo 源代码对象中的成员(函数, 方法, 变量等), 以及 Python 的标准库模块中的成员. <code class="docutils literal"><span class="pre">Alt-1</span> <span class="pre">(toggle-autocompleter)</span></code> 运行和禁止自动补全. <strong>注意</strong>: 自动补全只有在 &#64;language python 有效时才可使用.</p>
<p>例如, 仅输入 “c.atF” (在正文窗格中, 同时允许自动补全) , 即在内容窗格中自动插入 “c.atFileCommands”, 因为 “c.atFileCommands” 是 “c.atF” 仅有的补全.</p>
<p>另一个例子, 输入 “at.writeA” 将显示 (在日志窗格的自动补全标签) leoAtFile.py 中的所有 write 命令:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">writeAll</span><span class="p">:</span><span class="n">method</span>
<span class="n">writeAllHelper</span><span class="p">:</span><span class="n">method</span>
<span class="n">writeAtAutoNodes</span><span class="p">:</span><span class="n">method</span>
<span class="n">writeAtAutoNodesHelper</span><span class="p">:</span><span class="n">method</span>
<span class="n">writeAtShadowNodes</span><span class="p">:</span><span class="n">method</span>
<span class="n">writeAtShadowNodesHelper</span><span class="p">:</span><span class="n">method</span>
</pre></div>
</div>
<p>当显示单个补全时, 输入 ‘?’ 将显示方法的文档字符串. 例如, “c.atFileCommands.write?” 显示:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Write</span> <span class="n">a</span> <span class="mf">4.</span><span class="n">x</span> <span class="n">derived</span> <span class="n">file</span><span class="o">.</span>
<span class="n">root</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">position</span> <span class="n">of</span> <span class="n">an</span> <span class="o">@&lt;</span><span class="n">file</span><span class="o">&gt;</span> <span class="n">node</span>
</pre></div>
</div>
<p><strong>Calltips</strong> 显示了函数和方法的期待参数. <code class="docutils literal"><span class="pre">Alt-2</span> <span class="pre">(toggle-calltips)</span></code> 启用和禁用 calltips. 当 &#64;language python 有效时, <code class="docutils literal"><span class="pre">(</span></code> 显示 calltips.
<code class="docutils literal"><span class="pre">&lt;Return&gt;</span></code> 或 <code class="docutils literal"><span class="pre">Ctrl-G</span> <span class="pre">(keyboard-quit)</span></code> 退出 calltips. Calltips 作用于任何 Python 函数或方法, 包括 Python 的全局函数.
例如:</p>
<blockquote>
<div>g.toUnicode(            g.toUnicode(s, encoding, reportErrors=False
c.widgetWantsFocusNow(  c.widgetWantsFocusNow(w
reduce(                 reduce(function, sequence[, initial]) -&gt; value</div></blockquote>
</div>
</div>
<div class="section" id="id27">
<h2><a class="toc-backref" href="#id48">总结</a><a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<p>Leo 是一个功能齐全的提纲编辑器, 特性如下:</p>
<ul class="simple">
<li>指令控制 Leo 如何运行.</li>
<li>&#64;file 和 &#64;clean 节点创建外部文件.</li>
<li>myLeoSettings.leo 指定你的个人设置.</li>
<li>插件扩展 Leo. &#64;enabled-plugins 设置节点启用插件.</li>
</ul>
<p>对程序员:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Leo</span> <span class="n">拥有一个易用的脚本</span> <span class="n">API</span><span class="p">,</span> <span class="n">可完全访问提纲中的所有数据</span><span class="o">.</span>
<span class="o">-</span> <span class="nd">@button</span> <span class="n">和</span> <span class="nd">@command</span> <span class="n">节点定义了脚本</span><span class="p">,</span> <span class="n">其适用于所有</span> <span class="o">*</span><span class="n">other</span><span class="o">*</span> <span class="n">节点</span><span class="o">.</span>
<span class="o">-</span> <span class="nd">@test</span> <span class="n">节点创建单元测试</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Alt</span><span class="o">-</span><span class="mi">1</span> <span class="n">启用自动补全</span><span class="o">.</span>
</pre></div>
</div>
<p>Leo 有百余种命令, 如 <a class="reference external" href="commands.html">Leo 命令索引</a> 所述. 请随时参阅 <a class="reference external" href="https://groups.google.com/forum/#!forum/leo-editor">求助</a>.</p>
<p>翻译: <a class="reference external" href="https://github.com/OMlalala">OMlalala</a></p>
<p>校对: <a class="reference external" href="https://github.com/livingworld">hetao</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="leo_toc.html">
              <img class="logo" src="_static/Leo4-80-border.jpg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">Leo’s Tutorials</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tutorial-pim.html"
                        title="next chapter">Using Leo as a Personal Information Manager</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tutorial-pim.html" title="Using Leo as a Personal Information Manager"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Leo’s Tutorials"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="leo_toc.html">Leo 5.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tutorial.html" >Leo’s Tutorials</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 1997-2017, Edward K. Ream.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>